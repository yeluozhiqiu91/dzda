!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e():t.jeDate=e(window.jQuery||$)}(this,function(t){function e(t,e){for(var a in o)e[a]||(e[a]=o[a]);this.opts=e,this.valCell=t,this.init()}var a={},n=document,i="YYYY|MM|DD|hh|mm|ss|zz",s="YYYY|MM|DD|hh|mm|ss|zz".replace("|zz",""),r=function(t){return window.parseInt(t,10)},o={hmsLimit:!1,isdocScroll:!1},l={skinCell:"jedateblue",language:{name:"cn",month:["01","02","03","04","05","06","07","08","09","10","11","12"],weeks:["日","一","二","三","四","五","六"],times:["小时","分钟","秒数"],clear:"清空",today:"今天",yes:"确定",close:"关闭"},trigger:"click",format:"YYYY-MM-DD hh:mm:ss",minDate:"1900-01-01 00:00:00",maxDate:"2099-12-31 23:59:59"};t.fn.jeDate=function(a){return this.each(function(){return new e(t(this),a||{})})},t.extend({jeDate:function(a,n){return t(a).each(function(){return new e(t(this),n||{})})}}),a.isObj=function(t){for(var e in t)return!0;return!1},a.reMacth=function(t){return t.match(/\w+|d+/g)},a.docScroll=function(t){return t=t?"scrollLeft":"scrollTop",n.body[t]|n.documentElement[t]},a.winarea=function(t){return n.documentElement[t?"clientWidth":"clientHeight"]},a.isLeap=function(t){return t%100!=0&&t%4==0||t%400==0},a.getDaysNum=function(t,e){var n=31;switch(r(e)){case 2:n=a.isLeap(t)?29:28;break;case 4:case 6:case 9:case 11:n=30}return n},a.getYM=function(t,e,a){var n=new Date(t,e-1);return n.setMonth(e-1+a),{y:n.getFullYear(),m:n.getMonth()+1}},a.getPrevMonth=function(t,e,n){return a.getYM(t,e,0-(n||1))},a.getNextMonth=function(t,e,n){return a.getYM(t,e,n||1)},a.digit=function(t){return t<10?"0"+(0|t):t},a.IsNum=function(t){return!!/^[+-]?\d*\.?\d*$/.test(t)},a.parse=function(e,n,s){e=e.concat(n);var o={},l=i.split("|");return t.each(e,function(t,e){o[l[t]]=r(e)}),s.replace(new RegExp(i,"g"),function(t,e){return"zz"==t?"00":a.digit(o[t])})},a.checkFormat=function(t){var e=[];return t.replace(new RegExp(i,"g"),function(t,a){e.push(t)}),e.join("-")},a.parseMatch=function(t){var e=t.split(" ");return a.reMacth(e[0])},a.testFormat=function(e,a){var n=["YYYY","MM","DD"],s=[],r=[];return e.replace(new RegExp(i,"g"),function(t,e){s.push(t)}),t.each(n,function(e,a){t.each(s,function(t,e){a==e&&r.push(e)})}),("hh"==e.substring(0,2)?s.join("-"):r.join("-"))==a},a.checkDate=function(t){var e=a.reMacth(t);if(isNaN(e[0])||isNaN(e[1])||isNaN(e[2]))return!1;if(e[1]>12||e[1]<1)return!1;if(e[2]<1||e[2]>31)return!1;if((4==e[1]||6==e[1]||9==e[1]||11==e[1])&&e[2]>30)return!1;if(2==e[1]){if(e[2]>29)return!1;if((e[0]%100==0&&e[0]%400!=0||e[0]%4!=0)&&e[2]>28)return!1}return!0},a.returnDate=function(e,n,i){n=n||"YYYY-MM-DD hh:mm:ss";var o=void 0==i||""==i||i==[],l=o?[]:a.reMacth(i),d=[];o||(l[1]-=1,l[1]=-1==l[1]?12:l[1]);var h=l.length>0?new Date(l[0],l[1],l[2]||0,l[3]||0,l[4]||0,l[5]||0):new Date,c=h.getMonth(),u=h.getDate(),m=[h.getFullYear(),c,u,h.getHours(),h.getMinutes(),h.getSeconds()];t.each(s.split("|"),function(t,a){d.push(e[a]||"")});var f,g,p=31==a.getDaysNum(m[0],m[1]+1)&&31==a.digit((new Date).getDate()),v=m[2]+r(d[2]||0);f=p?v-1:v;var y=new Date(m[0]+r(d[0]||0),m[1]+r(d[1]||0),f,m[3]+r(d[3]||0),m[4]+r(d[4]||0),m[5]+r(d[4]||0));return g=p?a.digit(r(y.getDate())+1):a.digit(y.getDate()),a.parse([y.getFullYear(),r(y.getMonth())+1,g],[a.digit(y.getHours()),a.digit(y.getMinutes()),a.digit(y.getSeconds())],n)},a.isValHtml=function(t){return/textarea|input/.test(t[0].tagName.toLocaleLowerCase())},a.isBool=function(t){return void 0==t||1==t},a.sortDate=function(e,n){var i={},r=[],o=s.split("|"),l="hh"==a.checkFormat(n).substring(0,2),d=a.IsNum(e)?a.reMacth(l?e.replace(/(.{2})/g,"$1,"):e.substr(0,4).replace(/^(\d{4})/g,"$1,")+e.substr(4).replace(/(.{2})/g,"$1,")):a.reMacth(e),h=a.IsNum(e)?a.reMacth(l?n.replace(/(.{2})/g,"$1,"):n.substr(0,4).replace(/^(\w{4})/g,"$1,")+n.substr(4).replace(/(.{2})/g,"$1,")):a.reMacth(n);return t.each(d,function(t,e){i[h[t]]=e}),t.each(d,function(t,e){var a=l?o[3+t]:o[t];r.push(i[a])}),a.IsNum(e)?a.reMacth(l?e.replace(/(.{2})/g,"$1,"):e.substr(0,4).replace(/^(\d{4})/g,"$1,")+e.substr(4).replace(/(.{2})/g,"$1,")):r};var d=function(){for(var t="",e=[1,2,3,4,5,6,7,8,9,0],a=0;a<8;a++)t+=e[Math.round(Math.random()*(e.length-1))];return t},h=e.prototype,c="jefixed";return h.init=function(){var e=this,n=e.opts,i=new Date,s=void 0!=n.trigger?n.trigger:l.trigger,r=void 0==n.zIndex?2099:n.zIndex,o=void 0!=n.isinitVal&&0!=n.isinitVal;a.fixed=a.isBool(n.fixed);var h=void 0==n.fixedCell||""==n.fixedCell?"":"#"+this.opts.fixedCell,c=function(t){var e,s=n.format||l.format,r=n.initAddVal||{},o=n.hmsSetVal||{};e=a.isObj(o)?a.parse([i.getFullYear(),a.digit(i.getMonth()+1),a.digit(i.getDate())],[a.digit(o.hh),a.digit(o.mm),a.digit(o.ss)],s):a.returnDate(r,s),""==(t.val()||t.text())?a.isValHtml(t)?t.val(e):t.text(e):a.isValHtml(t)?t.val():t.text()},u=function(i,s){var o=t("<div/>",{id:s.replace(/\#/g,""),class:"jedatebox "+(n.skinCell||l.skinCell)}),d=t(h).length>0?"relative":1==a.fixed?"absolute":"fixed";o.attr("author","chen guojun").css({"z-index":"#jedatebox"!=s?"":r,position:d,display:"block"}),"#jedatebox"!=s&&o.attr({jeformat:n.format||l.format,jefixed:h}),a.minDate=n.minDate||l.minDate,a.maxDate=n.maxDate||l.maxDate,t(i).append(o),e.setHtml(n,s)};if(o&&0!=s&&e.valCell.each(function(){c(t(this))}),t(h).length>0){var m="#jedatebox"+d();u(h,m)}else{var f=["body","#jedatebox"];0!=s?e.valCell.on(s,function(e){e.stopPropagation(),t(f[1]).length>0||u(f[0],f[1])}):u(f[0],f[1])}},h.setHtml=function(e,n){a.boxelem=t(t(n).attr(c)).length>0?n:"#jedatebox",a.format=t(t(n).attr(c)).length>0?t(a.boxelem).attr("jeformat"):e.format||l.format,a.formatType=a.checkFormat(a.format);var i=this,s=t(a.boxelem),r=a.testFormat(a.format,"YYYY-MM"),o=a.testFormat(a.format,"YYYY"),d='<div class="jedatetop"></div><div class="jedatetopym" style="display: none;"><ul class="ymdropul"></ul></div><ol class="jedaol"></ol><ul class="'+(r||o?o?"jedayy":"jedaym":"jedaul")+'"></ul><div class="jedateprophms"></div><div class="jedatebot"></div>';s.empty().append(d),i.generateHtml(e,s)},h.isContainhh=function(t){var e=a.checkFormat(t);return a.reMacth("hh-"+e.split("hh")[1])},h.generateHtml=function(e,n){var i,s=this,o=s.valCell,d="",h=new Date,u=e.language||l.language,m=a.testFormat(a.format,"YYYY-MM"),f=a.testFormat(a.format,"YYYY"),g="hh"==a.format.substring(0,2),p=n.find(".jedatetop"),v=n.find(".jedatetopym"),y=n.find(".jedaol"),D=n.find(".jedateprophms"),j=n.find(".jedatebot");if(""==(o.val()||o.text()))i=[h.getFullYear(),h.getMonth()+1,h.getDate(),h.getHours(),h.getMinutes(),h.getSeconds()],a.currDate=new Date(i[0],r(i[1])-1,i[2],i[3],i[4],i[5]),a.ymdDate=i[0]+"-"+a.digit(i[1])+"-"+a.digit(i[2]);else{var M=a.isValHtml(o)?o.val():o.text(),Y=a.sortDate(M,a.format);g?(i=[h.getFullYear(),h.getMonth()+1,h.getDate(),Y[0],Y[1]||h.getMinutes(),Y[2]||h.getSeconds()],a.currDate=new Date(h.getFullYear(),h.getMonth()-1,h.getDate())):(i=[Y[0],void 0==Y[1]?h.getMonth()+1:Y[1],void 0==Y[2]?h.getDate():Y[2],void 0==Y[3]?h.getHours():Y[3],void 0==Y[4]?h.getMinutes():Y[4],void 0==Y[5]?h.getSeconds():Y[5]],a.currDate=new Date(i[0],r(i[1])-1,i[2],i[3],i[4],i[5]),a.ymdDate=i[0]+"-"+a.digit(i[1])+"-"+a.digit(i[2]))}var x='<div class="botflex jedatehmsshde"><ul class="jedatehms"><li><input type="text" maxlength="2" numval="23" hms="0"><i>:</i></li><li><input type="text" maxlength="2" numval="59" hms="1"><i>:</i></li><li style="padding:0;"><input type="text" maxlength="2" numval="59" hms="2"></li></ul></div><div class="botflex jedatebtn"><span class="jedateok jebtn2">'+u.yes+'</span><span class="jedatetodaymonth jebtn2">'+u.today+'</span><span class="jedateclear jebtn2">'+u.clear+"</span></div>",b='<p><span class="jedateymchle jebtn1">&lt;&lt;</span><span class="jedateymchri jebtn1">&gt;&gt;</span><span class="jedateymchok jebtn2">'+u.close+"</span></p>";if(g?n.children(".jedatetop,.jedatetopym,.jedaol,.jedaul").remove():p.append('<div class="jedateym" style="width:50%;"><i class="prev triangle monthprev"></i><span class="jedatemm" ym="12"><em class="jedatemonth"></em><em class="pndrop"></em></span><i class="next triangle monthnext"></i></div><div class="jedateym" style="width:50%;"><i class="prev triangle yearprev"></i><span class="jedateyy" ym="24"><em class="jedateyear"></em><em class="pndrop"></em></span><i class="next triangle yearnext"></i></div>'),m||f?(n.children(".jedatetopym,.jedaol").remove(),j.find(".jedatetodaymonth").hide(),p.children().css({width:"100%"}).first().remove(),p.children().find(".pndrop").remove(),n.find(m?".jedaym":".jedayy").append(s.eachYM(e,i[0],i[1],n))):(v.append(b),y.append(function(){return t.each(u.weeks,function(t,e){d+='<li class="weeks" data-week="'+e+'">'+e+"</li>"}),d})),j.append(x),a.isBool(e.isClear)||j.find(".jedateclear").hide(),m||f||g?j.find(".jedatetodaymonth").hide():a.isBool(e.isToday)||j.find(".jedatetodaymonth").hide(),(m||f)&&j.hide(),a.isBool(e.isok)||j.find(".jedateok").hide(),/\DD/.test(a.format)&&s.createDaysHtml(i[0],i[1],e,n),/\hh/.test(a.format)){D.append('<div class="jedatehmscon jedateprophours"></div><div class="jedatehmscon jedatepropminutes"></div><div class="jedatehmscon jedatepropseconds"></div>');var w=s.isContainhh(a.format),F=e.hmsSetVal||{},k=""==(o.val()||o.text())&&a.isObj(F)?F:{hh:i[3],mm:i[4],ss:i[5]};t.each(["hh","mm","ss"],function(t,n){var i=void 0==w[t]||"zz"==w[t],s=j.find("input[hms="+t+"]");s.val(i?"00":a.digit(k[n])).attr("readOnly",!a.isBool(e.ishmsVal)),0!=w.length&&i&&s.attr("disabled",!0)})}else j.find(".jedatehmsshde").hide(),j.find(".jedatebtn").css({width:"100%"});if(a.isBool(e.isTime)||(j.find(".botflex").css({width:"100%"}),j.find(".jedatehmsshde").hide()),s.eventsDate(e,n),0==t(t(a.boxelem).attr(c)).length){var C=e.position||[];C.length>0?n.css({top:C[0],left:C[1]}):s.orien(n,o)}setTimeout(function(){e.success&&e.success(o)},50)},h.createDaysHtml=function(e,n,i,s){var o=this,d=r(e),h=r(n),c="",u=0,m=i.language||l.language,f=i.isvalid||[],g=a.reMacth(a.minDate),p=g[0]+g[1]+g[2],v=a.reMacth(a.maxDate),y=v[0]+v[1]+v[2],D=new Date(d,h-1,1).getDay()||7,j=a.getDaysNum(d,h),M=a.getPrevMonth(d,h),Y=a.getDaysNum(d,M.m),x=a.getNextMonth(d,h),b=a.currDate.getFullYear()+"-"+a.digit(a.currDate.getMonth()+1)+"-"+a.digit(1),w=d+"-"+a.digit(h)+"-"+a.digit(1);s.find(".jedateyear").attr("year",d).text(d+("cn"==m.name?"年":"")),s.find(".jedatemonth").attr("month",h).text(h+("cn"==m.name?"月":""));var F=function(e,n,s){var r=i.marks;return t.isArray(r)&&r.length>0&&function(t,e){for(var a=t.length;a--;)if(t[a]===e)return!0;return!1}(r,e+"-"+a.digit(n)+"-"+a.digit(s))?'<i class="marks"></i>':""},k=function(t,e,a){var n;if(1==i.festival&&"cn"==m.name){var s=jeLunar(t,e-1,a),r=s.solarFestival||s.lunarFestival;n='<p><span class="solar">'+a+'</span><span class="lunar">'+(""!=(r&&s.jieqi)?r:s.jieqi||s.showInLunar)+"</span></p>"}else n='<p class="nolunar">'+a+"</p>";return n},C=function(t,e,n,i){var s=(t+"-"+a.digit(e)+"-"+a.digit(n)).replace(/\-/g,"");if(i){if(r(s)>=r(p)&&r(s)<=r(y))return!0}else if(r(p)>r(s)||r(y)<r(s))return!0};if(f.length>0)var H=new RegExp(f[0].replace(/,/g,"|"));for(var L=Y-D+1;L<=Y;L++,u++){var I,z=F(M.y,M.m,L);I=f.length>0?C(M.y,M.m,L,!1)?"disabled":H.test(L)?1==f[1]?"other":"disabled":1==f[1]?"disabled":"other":C(M.y,M.m,L,!1)?"disabled":"other",c+='<li data-ymd="'+M.y+"-"+M.m+"-"+L+'" class='+I+">"+(k(M.y,M.m,L)+z)+"</li>"}for(var N=1;N<=j;N++,u++){var S="",q=F(d,h,N),V=d+"-"+a.digit(h)+"-"+a.digit(N);"action"==(S=C(d,h,N,!0)?f.length>0?a.ymdDate==V?a.ymdDate==V?"action":b!=w&&w==V?"action":"":H.test(N)?1==f[1]?"":"disabled":1==f[1]?"disabled":"":a.ymdDate==V?"action":b!=w&&w==V?"action":"":"disabled")&&s.children("ul").attr("dateval",d+"-"+h+"-"+N),c+='<li data-ymd="'+d+"-"+h+"-"+N+'" class='+(""!=S?S:"")+">"+(k(d,h,N)+q)+"</li>"}for(var P=1,$=42-u;P<=$;P++){var A,B=F(x.y,x.m,P);A=f.length>0?C(x.y,x.m,P,!1)?"disabled":H.test(P)?1==f[1]?"other":"disabled":1==f[1]?"disabled":"other":C(x.y,x.m,P,!1)?"disabled":"other",c+='<li data-ymd="'+x.y+"-"+x.m+"-"+P+'" class='+A+">"+(k(x.y,x.m,P)+B)+"</li>"}s.find(".jedaul").empty().html(c),o.chooseDays(i,s)},h.eachStrhms=function(e,n){var i=this,s=[],r=a.minDate.split(" "),o=a.maxDate.split(" "),l=void 0==r[1]?"00:00:00":r[1],d=void 0==o[1]?"00:00:00":o[1],h=r[0],c=o[0],u=a.reMacth(l),m=a.reMacth(d);return t.each([24,60,60],function(t,r){for(var o="",l="",d=i.isContainhh(a.format),f=n.find(".jedatehms input"),g=f.eq(t).val(),p=0;p<r;p++){if(p=a.digit(p),a.isBool(e.hmsLimit))if(l=0==d.length||void 0!=d[t]&&"zz"!=d[t]?g==p?"action":"":"disabled",0==d.length||void 0!=d[t]&&"zz"!=d[t]){for(var v=a.ymdDate+" ",y=h+" ",D=c+" ",j=0;j<=t;j++)v+=j==t?p+":":f.eq(j).val()+":",y+=u[j]+":",D+=m[j]+":";v=new Date(v),y=new Date(y),D=new Date(D),l=v<y||v>D?p==g?"disabled action":"disabled":p==g?"action":""}else l="disabled";else l=p==g?"action":"";o+='<p class="'+l+'">'+p+"</p>"}s.push(o)}),s},h.eachYM=function(e,n,i,s){var o,d="",h=e.language||l.language,c=this.valCell,u=new Date;return a.testFormat(a.format,"YYYY")?(a.yearArr=new Array(12),t.each(a.yearArr,function(t){var e=a.parseMatch(a.minDate),i=a.parseMatch(a.maxDate),o=e[0],l=i[0],h=n-7+t,m=a.reMacth(a.isValHtml(c)?c.val():c.text()),f=""==(c.val()||c.text())?u.getFullYear():m[0];d+=h<o||h>l?"<li class='disabled' yy='"+h+"'>"+h+"</li>":"<li class='"+(r(f)==h?"action":"")+"' yy='"+h+"'>"+h+"</li>",r(f)==h&&s.children("ul").attr("dateval",h)}),o=n):(t.each(h.month,function(t,e){var r=a.parseMatch(a.minDate),o=a.parseMatch(a.maxDate),l=new Date(n,a.digit(e),"01"),h=new Date(r[0],r[1],r[2]),c=new Date(o[0],o[1],o[2]);d+=l<h||l>c?"<li class='disabled' ym='"+n+"-"+a.digit(e)+"'>"+n+"-"+a.digit(e)+"</li>":"<li class='"+(i==e?"action":"")+"' ym='"+n+"-"+a.digit(e)+"'>"+n+"-"+a.digit(e)+"</li>",i==e&&s.children("ul").attr("dateval",n+"-"+a.digit(e))}),o=n+"-"+a.digit(i)),s.find(".jedatetop .jedateyear").text(o),d},h.orien=function(t,e,n){var i,s,r,o,l=a.fixed?e[0].getBoundingClientRect():t[0].getBoundingClientRect();a.fixed?(s=l.right+t.outerWidth()/1.5>=a.winarea(1)?l.right-t.outerWidth():l.left+(n?0:a.docScroll(1)),i=l.bottom+t.outerHeight()/1<=a.winarea()?l.bottom-1:l.top>t.outerHeight()/1.5?l.top-t.outerHeight()-1:a.winarea()-t.outerHeight(),r=Math.max(i+(n?0:a.docScroll())+1,1)+"px",o=s+"px"):(r="50%",o="50%",t.css({"margin-top":-l.height/2,"margin-left":-l.width/2})),t.css({top:r,left:o})},h.lunarOrien=function(t,e,n){var i,s,r,o,l=e[0].getBoundingClientRect();return s=l.right+t[0].offsetWidth/1.5>=a.winarea(1)?l.right-t[0].offsetWidth:l.left+(n?0:a.docScroll(1)),i=l.bottom+t[0].offsetHeight/1<=a.winarea()?l.bottom-1:l.top>t[0].offsetHeight/1.5?l.top-t[0].offsetHeight-1:a.winarea()-t[0].offsetHeight,r=Math.max(i+(n?0:a.docScroll())+1,1)+"px",o=s+"px",{top:r,left:o}},h.dateClose=function(){0==t(t(a.boxelem).attr(c)).length&&t(a.boxelem).remove()},h.notice=function(t,e){var a=e.find(".jedatenotice");a.html(t),a.show(),setTimeout(function(){a.hide()},2e3)},h.eventsDate=function(e,n){var i=this,s=i.valCell,o=e.language||l.language,d="hh"==a.checkFormat(a.format).substring(0,2),h=0;if(i.chooseYearMonth(e,n),(a.testFormat(a.format,"YYYY")||a.testFormat(a.format,"YYYY-MM"))&&(i.preNextYearMonth(e,n),i.onlyYMevents(e,n)),/\hh/.test(a.format)){var u=n.find(".jedateprophours"),m=n.find(".jedatepropminutes"),f=n.find(".jedatepropseconds"),g=n.find(".jedateprophms"),p=i.eachStrhms(e,n);u.html(p[0]),m.html(p[1]),f.html(p[2]),g.on("click","p",function(){var e=t(this);e.hasClass("disabled")||(g.find(".jedatehmscon").hide(),n.find(".jedatebot .jedatehms input").eq(h).val(a.digit(e.text())))}),n.on("click",".jedatehms input",function(){h=t(this).parent().index(),g.show().find(".jedatehmscon").eq(h).show().siblings().hide()}),n.find(".jedatehms input").on("keyup",function(){var e=t(this),s=e.val(),l=(i.isContainhh(a.format),r(e.attr("numval"))),d=r(e.attr("hms"));if(e.val(s.replace(/\D/g,"")),s>l){e.val(l);var h="cn"==o.name?"输入值不能大于 ":"The input value is not greater than ";alert(h+l)}""==s&&e.val("00"),n.find(".jedatehmscon").eq(d).children().each(function(){t(this).removeClass("action")}),n.find(".jedatehmscon").eq(d).children().eq(r(e.val().replace(/^0/g,""))).addClass("action")})}n.find(".jedatebot .jedateclear").on("click",function(n){n.stopPropagation();var r=a.isValHtml(s)?s.val():s.text();a.isValHtml(s)?s.val(""):s.text(""),i.dateClose(),""!=r&&(a.isBool(e.clearRestore)&&(a.minDate=e.startMin||a.minDate,a.maxDate=e.startMax||a.maxDate),(t.isFunction(e.clearfun)||null!=e.clearfun)&&e.clearfun(s,r))}),n.find(".jedatebot .jedatetodaymonth").on("click",function(){var r=new Date,o=[r.getFullYear(),r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds()],l=a.parse([o[0],o[1],o[2]],[o[3],o[4],o[5]],a.format),d=r.getFullYear()+"-"+a.digit(r.getMonth()+1)+"-"+a.digit(r.getDate())+" "+a.digit(r.getHours())+":"+a.digit(r.getMinutes())+":"+a.digit(r.getSeconds());if(a.isValHtml(s)?s.val(l):a.text(l),t(n.attr(c)).length>0){var h="#"+n.attr("id");i.setHtml(e,h)}i.dateClose(),(t.isFunction(e.choosefun)||null!=e.choosefun)&&e.choosefun(s,l,d)}),n.find(".jedatebot .jedateok").on("click",function(o){o.stopPropagation();var l=new Date,h=function(){var e=[];return n.find(".jedatehms input").each(function(){void 0===t(this).attr("disabled")&&e.push(t(this).val())}),e}(),u=n.children("ul").attr("dateval"),m=d?[l.getFullYear(),l.getMonth()+1,l.getDate()]:a.reMacth(u),f=t(t(a.boxelem).attr(c)).length>0?n.attr("jeformat"):a.format,g=a.parse([r(m[0]),r(m[1]),r(m[2])],[h[0]||0,h[1]||0,h[2]||0],f),p=(m[0]||l.getFullYear())+"-"+a.digit(m[1]||l.getMonth()+1)+"-"+a.digit(m[2]||l.getDate())+" "+a.digit(h[0]||0)+":"+a.digit(h[1]||0)+":"+a.digit(h[2]||0);a.isValHtml(s)?s.val(g):s.text(g),i.dateClose(),(t.isFunction(e.choosefun)||null!=e.choosefun)&&e.choosefun(s,g,p)}),t(document).on("mouseup scroll",function(n){if(n.stopPropagation(),("scroll"!==n.type||a.isBool(e.isdocScroll))&&"#jedatebox"==a.boxelem){var i=t(a.boxelem);i&&"none"!==i.css("display")&&i.remove(),t("#jedatetipscon").length>0&&t("#jedatetipscon").remove()}}),t(a.boxelem).on("mouseup",function(t){t.stopPropagation()})},h.chooseDays=function(e,n){var i=this,s=i.valCell,o=(new Date,e.language||l.language);n.find(".jedaul li").on("click",function(r){var o=t(n.attr(c)).length>0?n.attr("jeformat"):a.format,l=t(this);if(!l.hasClass("disabled")){if(r.stopPropagation(),/\hh/.test(a.format))return n.children("ul").attr("dateval",l.attr("data-ymd")),void l.addClass("action").siblings().removeClass("action");var d=a.reMacth(l.attr("data-ymd")),h=a.parse([d[0],d[1],d[2]],[],o);if(a.isValHtml(s)?s.val(h):s.text(h),t(n.attr(c)).length>0){var u="#"+n.attr("id");i.setHtml(e,u)}else i.dateClose();e.festival&&t("#jedatetipscon").remove(),(t.isFunction(e.choosefun)||null!=e.choosefun)&&e.choosefun&&e.choosefun(s,h)}}),e.festival&&"cn"==o.name&&n.find(".jedaul li").on("mouseenter",function(){var n=t(this),i=a.reMacth(n.attr("data-ymd")),s=t("<div/>",{id:"jedatetipscon",class:"jedatetipscon"}),o=jeLunar(r(i[0]),r(i[1])-1,r(i[2])),l="<p>"+o.solarYear+"年"+o.solarMonth+"月"+o.solarDate+"日 "+o.inWeekDays+'</p><p class="red">农历：'+o.shengxiao+"年 "+o.lnongMonth+"月"+o.lnongDate+"</p><p>"+o.ganzhiYear+"年 "+o.ganzhiMonth+"月 "+o.ganzhiDate+"日</p>",d=""!=(o.solarFestival||o.lunarFestival)?'<p class="red">节日：'+o.solarFestival+o.lunarFestival+"</p>":"",c=""!=o.jieqi?'<p class="red">'+(""!=o.jieqi?"节气："+o.jieqi:"")+"</p>":"",u=""!=(o.solarFestival||o.lunarFestival||o.jieqi)?d+c:"";t("body").append(s),s.html(l+u);var m=h.lunarOrien(s,n);s.css({"z-index":void 0==e.zIndex?2104:e.zIndex+5,top:m.top,left:m.left,position:"absolute",display:"block"})}).on("mouseleave",function(){t("#jedatetipscon").length>0&&t("#jedatetipscon").remove()})},h.chooseYearMonth=function(e,n){var i=this,s=n.find(".yearprev"),o=n.find(".yearnext"),d=n.find(".monthprev"),h=n.find(".monthnext"),c=n.find(".jedatetopym"),u=n.find(".jedateyy"),m=n.find(".jedatemm"),f=n.find(".jedateyy .jedateyear"),g=n.find(".jedatemm .jedatemonth"),p=e.language||l.language,v=n.find(".jedateymchri"),y=n.find(".jedateymchle"),D=a.reMacth(a.minDate),j=D[0]+D[1],M=a.reMacth(a.maxDate),Y=M[0]+M[1],x=function(e){var a,n="";return t.each(new Array(15),function(t,i){if(7===t){var s=f.attr("year");a=r(e)>=r(D[0])&&r(e)<=r(M[0])?s==e?'class="action"':"":'class="disabled"',n+="<li "+a+' yy="'+e+'">'+e+("cn"==p.name?"年":"")+"</li>"}else a=r(e-7+t)>=r(D[0])&&r(e-7+t)<=r(M[0])?"":'class="disabled"',n+="<li "+a+' yy="'+(e-7+t)+'">'+(e-7+t)+("cn"==p.name?"年":"")+"</li>"}),n},b=function(e,i){var s="";12==i?(t.each(p.month,function(t,e){var n=g.attr("month"),e=a.digit(e),i=r(f.attr("year")+e)>=r(j)&&r(f.attr("year")+e)<=r(Y)?a.digit(n)==e?"action":"":"disabled";s+="<li class='"+i+"' mm='"+e+"'>"+e+("cn"==p.name?"月":"")+"</li>"}),t.each([v,y],function(t,e){e.hide()})):(s=x(e),t.each([v,y],function(t,e){e.show()})),c.removeClass(12==i?"jedatesety":"jedatesetm").addClass(12==i?"jedatesetm":"jedatesety"),n.find(".jedatetopym .ymdropul").html(s),c.show()};t.each([s,o],function(t,a){a.on("click",function(t){if("block"!=n.find(".jedatetopym").css("display")){t.stopPropagation();var o=r(f.attr("year")),l=r(g.attr("month")),d=a==s?--o:++o;i.createDaysHtml(d,l,e,n)}})}),t.each([d,h],function(t,s){s.on("click",function(t){if("block"!=n.find(".jedatetopym").css("display")){t.stopPropagation();var o=r(f.attr("year")),l=r(g.attr("month")),h=a.getPrevMonth(o,l),c=a.getNextMonth(o,l);s==d?i.createDaysHtml(h.y,h.m,e,n):i.createDaysHtml(c.y,c.m,e,n)}})}),t.each([u,m],function(s,o){o.on("click",function(){var s=t(this).attr("ym"),l=r(f.attr("year")),d=function(){n.find(".ymdropul li").on("click",function(s){var l=t(this),d=r(u==o?l.attr("yy"):f.attr("year")),h=u==o?r(g.attr("month")):a.digit(r(l.attr("mm")));l.hasClass("disabled")||(s.stopPropagation(),u==o?f.attr("year",d).html(d+("cn"==p.name?"年":"")):g.attr("month",h).html(h+("cn"==p.name?"月":"")),c.hide(),i.createDaysHtml(d,h,e,n))})};b(l,s),d(),n.find(".jedateymchok").on("click",function(t){t.stopPropagation(),c.hide()}),t.each([y,v],function(t,e){e.on("click",function(e){e.stopPropagation(),0==t?l-=15:l+=15;var a=x(l);n.find(".jedatetopym .ymdropul").html(a),d()})})})})},h.preNextYearMonth=function(e,n){var i=this,s=i.valCell,r=new Date,o=a.testFormat(a.format,"YYYY");n.find(o?".jedayy li":".jedaym li").on("click",function(n){if(!t(this).hasClass("disabled")){n.stopPropagation();var l=o?a.reMacth(t(this).attr("yy")):a.reMacth(t(this).attr("ym")),d=o?a.parse([l[0],r.getMonth()+1,1],[0,0,0],a.format):a.parse([l[0],l[1],1],[0,0,0],a.format);a.isValHtml(s)?s.val(d):s.text(d),i.dateClose(),(t.isFunction(e.choosefun)||null!=e.choosefun)&&e.choosefun(s,d)}})},h.onlyYMevents=function(e,n){var i,s=this,o=new Date,l=a.testFormat(a.format,"YYYY"),d=n.find(".jedateym .prev"),h=n.find(".jedateym .next"),c=a.reMacth(n.children("ul").attr("dateval")),u=r(c[0]),m=r(c[1]);t.each([d,h],function(t,r){r.on("click",function(t){t.stopPropagation(),l?(i=r==d?n.find(".jedayy li").eq(0).attr("yy"):n.find(".jedayy li").eq(a.yearArr.length-1).attr("yy"),n.find(".jedayy").html(s.eachYM(e,i,o.getMonth()+1,n))):(i=r==d?u-=1:u+=1,n.find(".jedaym").html(s.eachYM(e,i,m,n))),s.preNextYearMonth(e,n)})})},t.dateVer="3.8.5",t.nowDate=function(t,e,n){return e=e||"YYYY-MM-DD hh:mm:ss",n=n||[],"number"==typeof t&&(t={DD:t}),a.returnDate(t,e,n)},t.timeStampDate=function(t,e,n){if(n=n||"YYYY-MM-DD hh:mm:ss",1==e){var i=new Date(1e3*r(t.substring(0,10)));return a.parse([i.getFullYear(),a.digit(i.getMonth()+1),a.digit(i.getDate())],[a.digit(i.getHours()),a.digit(i.getMinutes()),a.digit(i.getSeconds())],n)}var s=a.reMacth(t);return new Date(s[0],s[1],s[2],s[3],s[4],s[5]).getTime().toString().substr(0,10)},t.splitDate=function(t){var e=t.match(/\w+|d+/g);return{YYYY:r(e[0]),MM:r(e[1])||0,DD:r(e[2])||0,hh:r(e[3])||0,mm:r(e[4])||0,ss:r(e[5])||0}},t.getLunar=function(t){if(/\YYYY-MM-DD/.test(a.formatType)){var e=t.substr(0,4).replace(/^(\d{4})/g,"$1,")+t.substr(4).replace(/(.{2})/g,"$1,"),n=a.IsNum(t)?a.reMacth(e):a.reMacth(t),i=jeLunar(n[0],n[1]-1,n[2]);return{nMonth:i.lnongMonth,nDays:i.lnongDate,yYear:r(i.solarYear),yMonth:r(i.solarMonth),yDays:r(i.solarDate),cWeek:i.inWeekDays,nWeek:i.solarWeekDay}}},e}),function(t,e){t.jeLunar=function(t){function e(t){var e=function(t,e){return new Date(31556925974.7*(t-1900)+6e4*n[e]+Date.UTC(1900,0,6,2,5)).getUTCDate()},m=function(t){var e,n=348;for(e=32768;e>8;e>>=1)n+=a[t-1900]&e?1:0;return n+g(t)},f=function(t){return i.charAt(t%10)+s.charAt(t%12)},g=function(t){return p(t)?65536&a[t-1900]?30:29:0},p=function(t){return 15&a[t-1900]},v=function(t,e){return a[t-1900]&65536>>e?30:29},y=function(t){var e,a=0,n=0,i=(t-new Date(1900,0,31))/864e5;for(this.dayCyl=i+40,this.monCyl=14,e=1900;e<2050&&i>0;e++)i-=n=m(e),this.monCyl+=12;for(i<0&&(i+=n,e--,this.monCyl-=12),this.year=e,this.yearCyl=e-1864,a=p(e),this.isLeap=!1,e=1;e<13&&i>0;e++)a>0&&e==a+1&&0==this.isLeap?(--e,this.isLeap=!0,n=g(this.year)):n=v(this.year,e),1==this.isLeap&&e==a+1&&(this.isLeap=!1),i-=n,0==this.isLeap&&this.monCyl++;0==i&&a>0&&e==a+1&&(this.isLeap?this.isLeap=!1:(this.isLeap=!0,--e,--this.monCyl)),i<0&&(i+=n,--e,--this.monCyl),this.month=e,this.day=i+1},D=function(t){return t<10?"0"+(0|t):t},j=function(t,e){var a=t;return e.replace(/dd?d?d?|MM?M?M?|yy?y?y?/g,function(t){switch(t){case"yyyy":var e="000"+a.getFullYear();return e.substring(e.length-4);case"dd":return D(a.getDate());case"d":return a.getDate().toString();case"MM":return D(a.getMonth()+1);case"M":return a.getMonth()+1}})};this.isToday=!1,this.isRestDay=!1,this.solarYear=j(t,"yyyy"),this.solarMonth=j(t,"M"),this.solarDate=j(t,"d"),this.solarWeekDay=t.getDay(),this.inWeekDays="星期"+l.charAt(this.solarWeekDay);var M=new y(t);this.lunarYear=M.year,this.shengxiao=r.charAt((this.lunarYear-4)%12),this.lunarMonth=M.month,this.lunarIsLeapMonth=M.isLeap,this.lnongMonth=this.lunarIsLeapMonth?"闰"+h[M.month-1]:h[M.month-1],this.lunarDate=M.day,this.showInLunar=this.lnongDate=function(t,e){var a;switch(e){case 10:a="初十";break;case 20:a="二十";break;case 30:a="三十";break;default:a=d.charAt(Math.floor(e/10)),a+=l.charAt(e%10)}return a}(this.lunarMonth,this.lunarDate),1==this.lunarDate&&(this.showInLunar=this.lnongMonth+"月"),this.ganzhiYear=f(M.yearCyl),this.ganzhiMonth=f(M.monCyl),this.ganzhiDate=f(M.dayCyl++),this.jieqi="",this.restDays=0,e(this.solarYear,2*(this.solarMonth-1))==j(t,"d")&&(this.showInLunar=this.jieqi=o[2*(this.solarMonth-1)]),e(this.solarYear,2*(this.solarMonth-1)+1)==j(t,"d")&&(this.showInLunar=this.jieqi=o[2*(this.solarMonth-1)+1]),"清明"==this.showInLunar&&(this.showInLunar="清明节",this.restDays=1),this.solarFestival=c[j(t,"MM")+j(t,"dd")],void 0===this.solarFestival?this.solarFestival="":/\*(\d)/.test(this.solarFestival)&&(this.restDays=parseInt(RegExp.$1),this.solarFestival=this.solarFestival.replace(/\*\d/,"")),this.showInLunar=""==this.solarFestival?this.showInLunar:this.solarFestival,this.lunarFestival=u[this.lunarIsLeapMonth?"00":D(this.lunarMonth)+D(this.lunarDate)],void 0===this.lunarFestival?this.lunarFestival="":/\*(\d)/.test(this.lunarFestival)&&(this.restDays=this.restDays>parseInt(RegExp.$1)?this.restDays:parseInt(RegExp.$1),this.lunarFestival=this.lunarFestival.replace(/\*\d/,"")),12==this.lunarMonth&&this.lunarDate==v(this.lunarYear,12)&&(this.lunarFestival=u["0100"],this.restDays=1),this.showInLunar=""==this.lunarFestival?this.showInLunar:this.lunarFestival}var a=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42448,83315,21200,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46496,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448],n=[0,21208,43467,63836,85337,107014,128867,150921,173149,195551,218072,240693,263343,285989,308563,331033,353350,375494,397447,419210,440795,462224,483532,504758],i="甲乙丙丁戊己庚辛壬癸",s="子丑寅卯辰巳午未申酉戌亥",r="鼠牛虎兔龙蛇马羊猴鸡狗猪",o=["小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至"],l="日一二三四五六七八九十",d="初十廿卅",h=["正","二","三","四","五","六","七","八","九","十","十一","腊"],c={"0101":"*1元旦节","0202":"湿地日","0214":"情人节","0308":"妇女节","0312":"植树节","0315":"消费者权益日","0401":"愚人节","0422":"地球日","0501":"*1劳动节","0504":"青年节","0512":"护士节","0518":"博物馆日","0520":"母亲节","0601":"儿童节","0623":"奥林匹克日","0630":"父亲节","0701":"建党节","0801":"建军节","0903":"抗战胜利日","0910":"教师节",1001:"*3国庆节",1201:"艾滋病日",1224:"平安夜",1225:"圣诞节"},u={"0100":"除夕","0101":"*2春节","0115":"元宵节","0505":"*1端午节","0707":"七夕节","0715":"中元节","0815":"*1中秋节","0909":"*1重阳节",1015:"下元节",1208:"腊八节",1223:"小年"};return function(t,a,n){return new e(new Date(t,a,n))}}(t.jeLunar)}(this);